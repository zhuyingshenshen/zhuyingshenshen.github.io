<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <title>Rotating, Translating & Scaling Square</title>

    <script id="rot-v-shader" type="x-shader/x-vertex">
    #version 300 es
    in vec4 vPosition;
    uniform float theta;
    uniform vec2 translation;
    uniform vec2 scale;   // 👈 新增缩放变量

    void main()
    {
        float u = cos(theta);
        float v = sin(theta);

        // 先缩放，再旋转，再平移
        vec2 scaled = vec2(vPosition.x * scale.x, vPosition.y * scale.y);

        gl_Position.x = scaled.x * u - scaled.y * v + translation.x;
        gl_Position.y = scaled.x * v + scaled.y * u + translation.y;
        gl_Position.z = 0.0;
        gl_Position.w = 1.0;
    }
    </script>

    <script id="rot-f-shader" type="x-shader/x-fragment">
    #version 300 es
    precision mediump float;
    out vec4 fColor;
    void main()
    {
        fColor = vec4( 1.0, 0.0, 0.0, 1.0 );
    }
    </script>

    <script type="text/javascript" src="common/webgl-utils.js"></script>
    <script type="text/javascript" src="common/initShaders.js"></script>
    <script type="text/javascript" src="common/gl-matrix-min.js"></script>
    <script type="text/javascript" src="js/rotsquare.js"></script>
</head>

<body onload="initRotSquare()">
    <h2>旋转 + 平移 + 缩放 正方形</h2>
    <canvas id="rot-canvas" width="512" height="512">你的浏览器不支持HTML5 canvas元素</canvas>

    <div style="margin-top:10px;">
        <label>X 平移量: <input type="number" id="tx" value="0" step="0.1"></label>
        <label>Y 平移量: <input type="number" id="ty" value="0" step="0.1"></label>
        <label>旋转角度 (°): <input type="number" id="angle" value="0" step="1"></label><br><br>

        <label>缩放轴: 
            <select id="scaleAxis">
                <option value="xy">XY 同时</option>
                <option value="x">X 轴</option>
                <option value="y">Y 轴</option>
            </select>
        </label>

        <label>缩放比例: <input type="number" id="scaleVal" value="1.0" step="0.1"></label>
    </div>
</body>

</html>
